<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="css/images/favicon.ico">
    <!-- <script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"></script> -->
    <!-- <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script> -->
    <!-- <link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.css" rel="stylesheet"> -->
    <!-- <script src="https://cdn.bootcss.com/bootstrap/4.1.1/js/bootstrap.js"></script> -->
    <!-- <script src="https://cdn.bootcss.com/element-ui/2.4.0/index.js"></script> -->
    <!-- <link href="https://cdn.bootcss.com/element-ui/2.4.0/theme-chalk/index.css" rel="stylesheet"> -->
    <title>ChunsenYe.home</title>
</head>
<style>
    body,
    html {
        height: 100%;
        overflow: hidden;
    }

    #app {
        cursor: pointer;
    }

    #canvas {
        background-color: #fff;
        cursor: url("./image/毛笔.png"), auto;
    }
</style>

<body oncontextmenu="return false" onselectstart="return false">
    <div id="app">
        <canvas id="canvas"></canvas>
    </div>
    <script>
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');
        var cw = canvas.width = window.innerWidth;
        var ch = canvas.height = window.innerHeight;
        //分区域
        window.onload = function () {
            var hw = new Handwriting("canvas");
            hw.lineMax = 40;
            hw.lineMin = 5;
            hw.linePressure = 2.5;
            hw.smoothness = 100;
            // ctx.strokeRect(100, 100, cw - 200, ch - 200);
            // ctx.strokeRect(100, 100, cw * 0.4 - 200, ch - 200);
            // ctx.strokeRect(cw * 0.4 - 100, 100, (cw - 200) * 0.6 + 120, ch - 200);
            // ctx.strokeRect(cw * 0.4 - 100, 100, (cw - 200) * 0.6 + 120, (ch - 200) * 0.3);
            drawDragon();
            drawMenu();
        }

        function Handwriting(id) {
            this.canvas = document.getElementById(id);
            this.ctx = this.canvas.getContext("2d");
            this.ctx.fillStyle = "rgba(0,0,0,0.25)";
            var _this = this;
            this.canvas.onmousedown = function (e) {
                _this.downEvent(e)
            };
            this.canvas.onmousemove = function (e) {
                _this.moveEvent(e)
            };
            this.canvas.onmouseup = function (e) {
                _this.upEvent(e)
            };
            this.canvas.onmouseout = function (e) {
                _this.upEvent(e)
            };
            this.moveFlag = false;
            this.upof = {};
            this.radius = 0;
            this.has = [];
            this.lineMax = 30;
            this.lineMin = 3;
            this.linePressure = 1;
            this.smoothness = 80;
        }

        Handwriting.prototype.clear = function () {
            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        }

        Handwriting.prototype.downEvent = function (e) {
            this.moveFlag = true;
            this.has = [];
            this.upof = this.getXY(e);
        }

        Handwriting.prototype.moveEvent = function (e) {
            if (!this.moveFlag)
                return;
            var of = this.getXY(e);
            var up = this.upof;
            var ur = this.radius;
            this.has.unshift({
                time: new Date().getTime(),
                dis: this.distance(up, of )
            });
            var dis = 0;
            var time = 0;
            for (var n = 0; n < this.has.length - 1; n++) {
                dis += this.has[n].dis;
                time += this.has[n].time - this.has[n + 1].time;
                if (dis > this.smoothness)
                    break;
            }
            var or = Math.min(time / dis * this.linePressure + this.lineMin, this.lineMax) / 2;
            this.radius = or;
            this.upof = of ;
            if (this.has.length <= 4)
                return;
            var len = Math.round(this.has[0].dis / 2) + 1;
            for (var i = 0; i < len; i++) {
                var x = up.x + ( of .x - up.x) / len * i;
                var y = up.y + ( of .y - up.y) / len * i;
                var r = ur + (or - ur) / len * i;
                this.ctx.beginPath();
                this.ctx.arc(x, y, r, 0, 2 * Math.PI, true);
                this.ctx.fill();
            }
        }

        Handwriting.prototype.upEvent = function (e) {
            this.moveFlag = false;
        }

        Handwriting.prototype.getXY = function (e) {
            return {
                x: e.clientX - this.canvas.offsetLeft + (document.body.scrollLeft || document.documentElement.scrollLeft),
                y: e.clientY - this.canvas.offsetTop + (document.body.scrollTop || document.documentElement.scrollTop)
            }
        }

        Handwriting.prototype.distance = function (a, b) {
            var x = b.x - a.x,
                y = b.y - a.y;
            return Math.sqrt(x * x + y * y);
        }

        function drawDragon() {
            ctx.strokeStyle = "#333";
            ctx.beginPath();
            ctx.moveTo(100, 250);
            ctx.bezierCurveTo(119, 304, 321, 134, 400, 250);
            ctx.stroke();
            ctx.moveTo(250, 300);
            ctx.bezierCurveTo(106, 528, 416, 340, 141, 648);
            ctx.stroke();
            ctx.moveTo(197, 173);
            ctx.bezierCurveTo(189, -81, 224, -97, 227, 174);
            ctx.stroke();
            ctx.moveTo(297, 173);
            ctx.bezierCurveTo(289, -81, 324, -97, 327, 174);
            ctx.stroke();
            ctx.moveTo(274, 283);
            ctx.bezierCurveTo(213, 203, 330, 208, 278, 282);
            ctx.stroke();
            ctx.moveTo(171, 87);
            ctx.bezierCurveTo(30, 362, 475, 379, 353, 87);
            ctx.stroke();
            ctx.closePath();
        }
        function drawMenu(){
            ctx.fillStyle='black' 
            ctx.font='30px 宋体'
            ctx.fillText('水龙头',750,30);
            ctx.fillText('学识',600,70);
            ctx.fillText('格物',700,70);
            ctx.fillText('致知',800,70);
            ctx.fillText('风流',900,70);
            ctx.beginPath();
            ctx.moveTo(600, 90);
            ctx.lineTo(960, 90);
            ctx.strokeStyle = "rgba(0,0,0,0.25)";
            ctx.lineWidth=10; 
            ctx.stroke();
            ctx.closePath();
            ctx.fillStyle = "rgba(0,0,0,0.25)";
            ctx.strokeStyle = "rgb(0,0,0)";
            ctx.lineWidth=1;
        }
    </script>
</body>

</html>